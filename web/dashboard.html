<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Табло</title>
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <header>
        <h1>Табло</h1>
    </header>
    <main>
        <button class="btn-primary" onclick="goHome()">Начало</button>
        <div class="container">
            <ul id="car-tree" class="car-tree"></ul>
        </div>
    </main>
    <script>
        function goHome() {
            window.location.href = '/web/';
        }

        fetch('/api/bookings')
            .then(response => response.json())
            .then(data => {
                const carTree = document.querySelector('#car-tree');
                data.forEach(car => {
                    const carNode = document.createElement('li');
                    carNode.classList.add('car-item');
                    carNode.innerHTML = `<span class="car-model">${car.car_model}</span>`;

                    const bookingList = document.createElement('ul');
                    bookingList.classList.add('booking-list');

                    car.bookings.forEach((booking, index) => {
                        const bookingNode = document.createElement('li');
                        bookingNode.classList.add('booking-item');
                        bookingNode.innerHTML = `<span>Trip ${index + 1}:</span> <span>Department: ${booking.department}</span>, <span>Usage Date: ${booking.usage_date}</span>, <span>Destination: ${booking.destination}</span>`;
                        bookingList.appendChild(bookingNode);
                    });

                    carNode.appendChild(bookingList);
                    carTree.appendChild(carNode);
                });
            });
    </script>
</body>
</html>
